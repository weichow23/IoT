## 用户手册

[TOC]





#### 1. 项目简介

##### 1.1 项目背景

+ 物联网（ IoT ，Internet of things ）即“万物相连的互联网”，是互联网基础上的延伸和扩展的网络，将各种信息传感设备与网络结合起来而形成的一个巨大网络，实现在任何时间、任何地点，人、机、物的互联互通。
+ 本网站作为一个物联网应用网站，基于B/S结构设计，通过实现物联网的基本功能，实现指定物联网终端数据的接收与统计分析。

##### 1.2 运行环境

###### 1.2.1 软件环境

+ 详见**运行指南文档**

###### 1.2.2 硬件环境

+ CPU：主频大于2GHz
+ 硬盘:硬盘容量大于 200GB、硬盘转速大于等于 5400 转/分钟
+ 其他硬件满足正常的使用需求即可。



#### 2. 功能介绍

##### 2.1 功能模块设置

###### 2.1.1 未注册的游客

+ 用户登录模块
+ 首页展示模块

###### 2.1.2 用户

+ 用户管理模块
+ 统计展示模块
+ 设备管理模块
+ 信息展示模块

##### 2.2 具体功能

+ 能够对mqttServer发布的信息进行监听和保存
+ 提供用户管理功能，能注册登录进入系统，且进行一定的加密与验证处理
+ 用户可以查看并编辑、新建设备信息
+ 用户可以查看某个设备上报的数据信息
+ 用户可以对数据信息进行筛选，并查看设备的状态和历史轨迹
+ 用户可以通过图表形式直观查看设备、信息的统计情况



#### 3. 操作指南

##### 3.1 用户注册与登录

+ 进入主页后，点击图片或者右上角登录，进入登录、注册界面

  ![用户注册](./report.assets/用户注册.png) 

  <center>图3-1-1用户注册</center>

+ 点击注册成功后便可进行登录

  ![用户登录](./report.assets/用户登录.png) 

  <center>图3-1-2用户登录</center>

+ **当关掉该页面后，由于token存在60min，所以在60分钟内若再次点击登录，会自动根据token进行登录**

+ 登录后进入到个人中心界面

  ![个人中心](./report.assets/个人中心.png) 

  <center>图3-1-3 个人中心</center>

+ **！但是如果点击登出，则不会保存token信息！**

##### 3.2 个人信息修改

+ 可以通过昵称修改修改姓名，不过姓名具有唯一性，所以如果已经被占用了就无法更改。

  ![昵称修改失败](./report.assets/昵称修改失败.png) 

  <center>图3-2-1 昵称修改失败</center>

  ![昵称修改成功](./report.assets/昵称修改成功.png) 

  <center>图3-2-2 昵称修改成功</center>

+ 可以通过密码修改来修改密码，**采用md5加密**，保证密码的不被泄露性

  ![密码修改成功](./report.assets/密码修改成功.png) 

  <center>图3-2-3 密码修改成功</center>

##### 3.3 设备信息编辑

+ 点击左侧导航栏“设备中心”，查看已有设备

  ![查看已有设备](./report.assets/查看已有设备.png) 

  <center>图3-3-1 查看已有设备</center>

+ 点击左上角新建设备，输入设备信息即可新建设备

  ![新建设备](./report.assets/新建设备.png) 

  <center>图3-3-2 新建设备</center>

  ![新建设备成功](./report.assets/新建设备成功.png) 

  <center>图3-3-3 新建设备成功</center>

+ 点击设备右侧的更改按钮，进行设备信息的更改

  ![设备编辑](./report.assets/设备编辑.png) 

  <center>图3-3-4 设备编辑</center>

  ![设备编辑成功](./report.assets/设备编辑成功.png) 

  <center>图3-3-5 设备编辑成功</center>

+ 点击设备右侧的删除按钮即可删除设备

  ![设备删除](./report.assets/设备删除.png) 

  <center>图3-3-6 设备删除</center>

  ![设备删除成功](./report.assets/设备删除成功.png)  

  <center>图3-3-7 设备删除成功</center>

+ 还可以在右上角输入关键字，筛选出对应想要的设备

  ![设备搜索](./report.assets/设备搜索.png) 

  <center>图3-3-8 设备搜索</center>

##### 3.4 消息数据统计

+ 点击数据统计，选择对应的设备即可查看该设备的数据，此时也可以对正常消息和**警告消息进行区分**

  ![数据查看](./report.assets/数据查看.png) 

  <center>图3-4-1 数据查看</center>

+ 把y轴往下拉能看到地图，已经表明了该设备的历史轨迹

  ![历史轨迹](./report.assets/历史轨迹.png) 

  <center>图3-4-2 历史轨迹</center>

##### 3.5 图表总览

+ 点击左侧总览，可以看到**设备在线情况**，**过去七天设备新建情况**，**过去七天消息接受情况**，这三个图表，分别是饼状图，柱状图和折线图

  ![图标总览](./report.assets/图标总览.png) 

  <center>图3-5-1 图标总览</center>



#### 4. 常见问题QA

##### Q：为什么一段时间后点击任何功能都没反应？

+ 因为token存在的时间只有60min，所以一旦token失效，则无法再进行任何操作，所以这种情况下应该登出后重新登陆。

##### Q：为什么目前只有device0001~device0005的数据流，我可以设置其他数据流吗？

+ 因为目前的mqttClient只发送5个并发消息，所以只有这5个数据流，设置成其他数据流的话将会被变成**离线状态**，没有办法接受到任何消息。









1. **下载和安装 Mosquitto**：首先，确保已从 [Mosquitto 官方网站](https://mosquitto.org/download/) 下载并安装 Mosquitto。选择适合您操作系统的安装程序。

2. **添加到 PATH**：安装完成后，您需要确保 Mosquitto 的安装目录已添加到系统的 PATH 环境变量中，以便可以在命令提示符中访问它。要执行此操作，您可以按照以下步骤进行操作：

   - 在 Windows 桌面上，右键单击“此电脑”或“计算机”，然后选择“属性”。
   - 点击“高级系统设置”。
   - 在“高级”选项卡上，点击“环境变量”按钮。
   - 在“系统变量”部分，找到 PATH 变量，然后点击“编辑”。
   - 在变量值中，添加 Mosquitto 安装目录的路径，例如：`C:\Program Files\Mosquitto`。确保不要删除现有的路径，只需在最后加上分号（;）然后添加 Mosquitto 的路径。
   - 点击“确定”来保存更改。

3. **启动 Mosquitto 服务**：在命令提示符中，输入以下命令来启动 Mosquitto 服务：

   ```
   mosquitto -v
   ```

   这应该会启动 Mosquitto 代理并显示其日志输出。如果一切设置正确，您将看到代理的版本信息和其他日志。







这个错误提示说明系统无法找到 `mvn` 命令，这是因为系统的环境变量没有包含 Maven 的安装目录。要解决这个问题，你可以按照以下步骤操作：

1. **安装 Maven：** 首先，确保你已经正确地安装了 Maven。如果你还没有安装 Maven，可以从 Maven 的官方网站下载并安装。安装完成后，确保你知道 Maven 的安装路径。

2. **配置环境变量：** 一旦 Maven 安装完成，你需要配置系统的环境变量，以便系统能够找到 Maven 的执行文件。以下是配置环境变量的步骤：

   - 右键点击“此电脑”（或“计算机”），然后选择“属性”。
   - 在弹出的窗口中，点击“高级系统设置”。
   - 在系统属性窗口中，点击“环境变量”按钮。
   - 在“系统变量”部分，找到名为 `Path` 的变量，然后点击“编辑”按钮。
   - 在编辑环境变量窗口中，点击“新建”，然后添加 Maven 的 `bin` 目录的路径，例如：`C:\apache-maven-3.6.3\bin`（根据你的 Maven 安装路径进行调整）。
   - 确保保存所有更改，然后关闭窗口。

3. **验证 Maven 安装：** 打开一个新的命令提示符窗口，并运行以下命令来验证 Maven 是否正确安装：

   ```
   bashCopy code
   mvn -version
   ```

   如果 Maven 已经正确安装和配置，它会显示 Maven 的版本信息和其他相关信息。

4. **重新运行 Maven 命令：** 一旦 Maven 正确安装和配置，你就可以返回到你的项目目录（E:\IoT\client）并重新运行你的 Maven 命令，如 `mvn clean install`。

如果你按照上述步骤正确配置了 Maven 的环境变量，那么你应该能够成功运行 Maven 命令，而不再收到 "mvn 不是内部或外部命令" 的错误信息。